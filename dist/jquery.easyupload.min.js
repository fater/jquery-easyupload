!function(e){var n={url:document.URL,data:{},file_name:"file",on_progress:function(e){},on_upload_before:function(e){},on_upload_file:function(e){},on_upload_finish:function(){},on_upload_error:function(e){}},s={files:{},all_files_size:0,uploaded_size:0,size:0,send_pos:0,sender_launched:!1},o={queue:function(i){e.each(i,function(e,n){s.size++,s.files[s.size]=n,s.all_files_size+=n.size}),0==s.sender_launched&&(n.on_upload_before.call(this,{files:s.size,files_size:s.all_files_size}),s.sender_launched=!0,o.send())},send:function(){if(s.send_pos>=s.size)return s={files:{},all_files_size:0,uploaded_size:0,size:0,send_pos:0,sender_launched:!1},n.on_upload_finish(),null;s.send_pos++;var i=new FormData;i.append(n.file_name,s.files[s.send_pos]),e.each(n.data,function(e,n){i.append(e,n)}),e.ajax({url:n.url,type:"POST",data:i,cache:!1,dataType:"json",processData:!1,contentType:!1,complete:function(e){s.uploaded_size+=s.files[s.send_pos].size,o.send()},success:function(e){n.on_upload_file(e)},error:function(o){var i=s.files[s.send_pos].name;n.on_upload_error.call(this,e.extend(o,{file_name:i}))},xhr:function(){var o=e.ajaxSettings.xhr();return o.upload.onprogress=function(e){var o={};o.progress_file=e.loaded/e.total*100,o.progress_total=(s.uploaded_size+e.loaded)/s.all_files_size*100,o.total_files=s.size,o.current_file=s.send_pos,n.on_progress.call(this,o)},o.upload.onload=function(){},o}})}};e.fn.easyupload=function(s){n=e.extend(n,s),e(document).ready(function(){e(this).on("change",function(e){o.queue.call(this,e.target.files)})})}}(jQuery);